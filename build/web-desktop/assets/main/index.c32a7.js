System.register("chunks:///_virtual/AudioManager.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"2d1c79XinZC3bhqLn3QcJ+f","AudioManager",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/BettingPanel.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"32c1fv1YgtNp6BM4merwgD+","BettingPanel",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/DiceService.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"86b0djSeXBMDZP8qEjrXNDC","DiceService",void 0);n("DiceService",function(){function n(n){this.rng=n}return n.prototype.roll=function(){return[this.rng.randInt(1,6),this.rng.randInt(1,6),this.rng.randInt(1,6)]},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/DiceView.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"4484a0955JC5rC4ZhAr9y5N","DiceView",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RandomService.ts","./DiceService.ts","./ScoreManager.ts","./HistoryManager.ts","./RoundManager.ts"],(function(t){var e,n,i,r,a,o,l,u,s,c,h,p,b,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,l=t.Label,u=t.EditBox,s=t.Button,c=t.Component},function(t){h=t.RandomService},function(t){p=t.DiceService},function(t){b=t.ScoreManager},function(t){g=t.HistoryManager},function(t){f=t.RoundManager}],execute:function(){var B,d,y,L,m,I,v,w,T,G,z,M,S,N,R,x,A,D,H,O,U;a._RF.push({},"799c3LvFgNEh7ZPBNnElc/g","GameManager",void 0);var j=o.ccclass,E=o.property;t("GameManager",(B=j("GameManager"),d=E(l),y=E(l),L=E(l),m=E(l),I=E(u),v=E(u),w=E(s),T=E(s),G=E(s),B((S=e((M=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"balanceLabel",S,r(e)),i(e,"resultLabel",N,r(e)),i(e,"diceLabel",R,r(e)),i(e,"historyLabel",x,r(e)),i(e,"amountInput",A,r(e)),i(e,"totalGuessInput",D,r(e)),i(e,"rollButton",H,r(e)),i(e,"taiButton",O,r(e)),i(e,"xiuButton",U,r(e)),e.round=void 0,e.score=void 0,e.history=void 0,e}n(e,t);var a=e.prototype;return a.onLoad=function(){var t=this,e=new h,n=new p(e);this.score=new b,this.history=new g,this.round=new f(n,this.score,this.history,(function(e){return t.onStateChange(e)})),this.updateBalance(),this.updateHistoryUI(),this.resetInputs()},a.onStateChange=function(t){"Rolling"===t&&(this.resultLabel.string="Rolling..."),"Settle"===t&&this.resetInputs()},a.updateBalance=function(){this.balanceLabel.string="Balance: "+this.score.balance},a.updateHistoryUI=function(){var t=this.history.histories,e=[].concat(t).reverse().map((function(t){return t.time+" | "+t.dice.join(",")+" | "+t.total+" | "+t.betType+" | "+t.result+" | "+t.balance}));this.historyLabel.string=e.join("\n")},a.resetInputs=function(){this.amountInput.string="",this.totalGuessInput.string="",this.rollButton&&(this.rollButton.interactable=!1),this.taiButton&&(this.taiButton.interactable=!0),this.xiuButton&&(this.xiuButton.interactable=!0),this.totalGuessInput&&(this.totalGuessInput.enabled=!0)},a.placeBetTai=function(){this.placeBet("TAI")},a.placeBetXiu=function(){this.placeBet("XIU")},a.placeBetTotal=function(){this.placeBet("TOTAL")},a.placeBet=function(t){var e,n=parseInt(this.amountInput.string||"0",10);if(n<=0||isNaN(n))return this.resultLabel.string="Nhập số điểm hợp lệ!",void(this.rollButton&&(this.rollButton.interactable=!1));if("TOTAL"===t&&(e=parseInt(this.totalGuessInput.string||"0",10),isNaN(e)||e<3||e>18))return this.resultLabel.string="Nhập tổng hợp lệ (3-18)!",void(this.rollButton&&(this.rollButton.interactable=!1));try{"TOTAL"===t?(this.round.placeBet({type:t,amount:n,totalGuess:e}),this.taiButton&&(this.taiButton.interactable=!1),this.xiuButton&&(this.xiuButton.interactable=!1)):(this.round.placeBet({type:t,amount:n}),this.totalGuessInput&&(this.totalGuessInput.enabled=!1)),this.resultLabel.string="Đặt "+n+" vào "+t+("TOTAL"===t?" (Tổng: "+e+")":""),this.rollButton&&(this.rollButton.interactable=!0)}catch(t){this.resultLabel.string="Lỗi: "+t.message,this.rollButton&&(this.rollButton.interactable=!1)}},a.onRoll=function(){try{if(!this.round.currentBet)return void(this.resultLabel.string="Bạn chưa đặt cược!");var t=this.round.roll(),e=t.dice,n=t.calc,i=n.total,r=n.delta,a="";a=i>=11&&i<=17?"TAI":i>=4&&i<=10?"XIU":"—",this.diceLabel.string="Dice: "+e.join("/")+" (Total: "+i+", "+a+")",this.resultLabel.string=n.win?"WIN (+"+r+")":"LOSE ("+r+")",this.updateBalance(),this.updateHistoryUI(),this.resetInputs()}catch(t){this.resultLabel.string="Lỗi: "+t.message}},e}(c)).prototype,"balanceLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(M.prototype,"resultLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(M.prototype,"diceLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(M.prototype,"historyLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(M.prototype,"amountInput",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(M.prototype,"totalGuessInput",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(M.prototype,"rollButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(M.prototype,"taiButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(M.prototype,"xiuButton",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=M))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/HistoryManager.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"213e925BkFJ7KXlDE+vkHwF","HistoryManager",void 0);t("HistoryManager",function(){function t(t){void 0===t&&(t=window.localStorage),this.key="mini-dice-history",this.maxRecords=10,this.storage=void 0,this.histories=[],this.storage=t;var i=this.storage.getItem(this.key);if(i)try{this.histories=JSON.parse(i)}catch(t){this.histories=[]}}var i=t.prototype;return i.add=function(t){this.histories.unshift(t),this.histories.length>this.maxRecords&&(this.histories=this.histories.slice(0,this.maxRecords)),this.save()},i.save=function(){this.storage.setItem(this.key,JSON.stringify(this.histories))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/HistoryView.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d2d653qHi1PhbNIyAg8uGJH","HistoryView",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./DiceService.ts","./HistoryManager.ts","./RandomService.ts","./ResultCalculator.ts","./RoundManager.ts","./ScoreManager.ts","./models.ts","./AudioManager.ts","./BettingPanel.ts","./DiceView.ts","./GameManager.ts","./HistoryView.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/models.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"43810rY185EnIllJP8uwCVu","models",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RandomService.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"103e7+lX6lLFq0uGPns2rm0","RandomService",void 0);n("RandomService",function(){function n(n){void 0===n&&(n=Math.random),this.randFn=n}return n.prototype.randInt=function(n,t){return Math.floor(this.randFn()*(t-n+1))+n},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ResultCalculator.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("calculateResult",(function(t,e){var u=t.reduce((function(t,e){return t+e}),0),c=!1,l=0,n=u>=11&&u<=17,r=u>=4&&u<=10;"TAI"===e.type?(c=n,l=1):"XIU"===e.type?(c=r,l=1):"TOTAL"===e.type&&(c=e.totalGuess===u,l=5);var a=c?e.amount*l:-e.amount;return{total:u,win:c,multiplier:l,delta:a,betType:e.type}})),e._RF.push({},"65016/ZbGlJXJmc2ZPPxj7q","ResultCalculator",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RoundManager.ts",["cc","./ResultCalculator.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.calculateResult}],execute:function(){e._RF.push({},"68ecepqR5NHOZdkfmYH7k8v","RoundManager",void 0);t("RoundManager",function(){function t(t,e,n,a){this.state="Idle",this.currentBet=null,this.lastDice=null,this.diceService=t,this.scoreManager=e,this.history=n,this.onStateChange=a}var e=t.prototype;return e.setState=function(t){this.state=t,this.onStateChange&&this.onStateChange(t)},e.clearBet=function(){this.currentBet=null,this.setState("Idle")},e.startBetting=function(){this.clearBet(),this.setState("Betting")},e.placeBet=function(t){if(t.amount<=0)throw new Error("Bet must > 0");if(t.amount>this.scoreManager.balance)throw new Error("Not enough balance");this.currentBet=t,this.setState("Betting")},e.roll=function(){if(!this.currentBet)throw new Error("No bet placed!");this.setState("Rolling");var t=this.diceService.roll();this.lastDice=t;var e=n(t,this.currentBet);this.setState("Result"),this.scoreManager.change(e.delta);(new Date).toISOString(),e.total,this.currentBet,e.win,this.scoreManager.balance;return this.history.add({time:(new Date).toLocaleTimeString(),dice:t,total:e.total,betType:this.currentBet.type,result:e.win?"WIN":"LOSE",balance:this.scoreManager.balance}),this.setState("Settle"),this.currentBet=null,this.setState("Idle"),{dice:t,calc:e}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreManager.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"4aba9USSxlI/YTUTU1g2mF4","ScoreManager",void 0);e("ScoreManager",function(){function e(e,t){void 0===e&&(e=window.localStorage),void 0===t&&(t="mini-dice-balance"),this.key=void 0,this.storage=void 0,this.balance=void 0,this.storage=e,this.key=t;var a=this.storage.getItem(this.key),i=null!==a?Number(a):NaN;isNaN(i)||i<0?this.balance=1e3:this.balance=Math.floor(i),this.save()}var t=e.prototype;return t.change=function(e){this.balance+=e,this.balance<0&&(this.balance=0),this.save()},t.save=function(){this.storage.setItem(this.key,String(this.balance))},e}());t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});