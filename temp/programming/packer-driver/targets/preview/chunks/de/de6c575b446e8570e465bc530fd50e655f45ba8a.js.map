{"version":3,"sources":["file:///D:/cocos/MiniDiceGame/assets/scripts/core/ResultCalculator.ts"],"names":["calculateResult","dice","bet","total","reduce","s","v","win","multiplier","isTai","isXiu","type","totalGuess","delta","amount","betType"],"mappings":";;;;;AAUO,WAASA,eAAT,CAAyBC,IAAzB,EAAyCC,GAAzC,EAA+D;AACpE,QAAMC,KAAK,GAAGF,IAAI,CAACG,MAAL,CAAY,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAA1B,EAA6B,CAA7B,CAAd;AACA,QAAIC,GAAG,GAAG,KAAV;AACA,QAAIC,UAAU,GAAG,CAAjB;AAEA,QAAMC,KAAK,GAAGN,KAAK,IAAI,EAAT,IAAeA,KAAK,IAAI,EAAtC;AACA,QAAMO,KAAK,GAAGP,KAAK,IAAI,CAAT,IAAcA,KAAK,IAAI,EAArC;;AAEA,QAAID,GAAG,CAACS,IAAJ,KAAa,KAAjB,EAAwB;AACtBJ,MAAAA,GAAG,GAAGE,KAAN;AACAD,MAAAA,UAAU,GAAG,CAAb;AACD,KAHD,MAGO,IAAIN,GAAG,CAACS,IAAJ,KAAa,KAAjB,EAAwB;AAC7BJ,MAAAA,GAAG,GAAGG,KAAN;AACAF,MAAAA,UAAU,GAAG,CAAb;AACD,KAHM,MAGA,IAAIN,GAAG,CAACS,IAAJ,KAAa,OAAjB,EAA0B;AAC/BJ,MAAAA,GAAG,GAAGL,GAAG,CAACU,UAAJ,KAAmBT,KAAzB;AACAK,MAAAA,UAAU,GAAG,CAAb;AACD;;AAED,QAAMK,KAAK,GAAGN,GAAG,GAAGL,GAAG,CAACY,MAAJ,GAAaN,UAAhB,GAA6B,CAACN,GAAG,CAACY,MAAnD;AACA,WAAO;AAAEX,MAAAA,KAAF;AAASI,MAAAA,GAAT;AAAcC,MAAAA,UAAd;AAA0BK,MAAAA,KAA1B;AAAiCE,MAAAA,OAAO,EAAEb,GAAG,CAACS;AAA9C,KAAP,CApBoE,CAoBP;AAC9D;;;;;;6BArBeX,e","sourcesContent":["import { Bet } from './models';\n\nexport interface CalcResult {\n  total: number;\n  win: boolean;\n  multiplier: number;\n  delta: number;\n  betType: string; \n}\n\nexport function calculateResult(dice: number[], bet: Bet): CalcResult {\n  const total = dice.reduce((s, v) => s + v, 0);\n  let win = false;\n  let multiplier = 0;\n\n  const isTai = total >= 11 && total <= 17;\n  const isXiu = total >= 4 && total <= 10;\n\n  if (bet.type === 'TAI') {\n    win = isTai;\n    multiplier = 1;\n  } else if (bet.type === 'XIU') {\n    win = isXiu;\n    multiplier = 1;\n  } else if (bet.type === 'TOTAL') {\n    win = bet.totalGuess === total;\n    multiplier = 5;\n  }\n\n  const delta = win ? bet.amount * multiplier : -bet.amount;\n  return { total, win, multiplier, delta, betType: bet.type }; // thêm ở đây\n}\n"]}